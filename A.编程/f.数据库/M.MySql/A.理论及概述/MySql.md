







# N+1.视图

## N+1.1什么是视图

视图是虚拟的表，与包含数据的表不一样，视图只包含使用动态检查数据的查询。



## N+1.2为什么使用视图

a.重用SQL语句

b.简化复杂的SQL操作，在编写查询后，可以方便的重用他而不必知道他的基本查询细节

c.使用表的组成部分而不是整个表

d.保护数据，可以给用户表特定部分的访问权，而不是表全部的访问权

e.更改数据表示格式，视图可以返回与底层表的表示和格式不同的数据





## N+1.3 性能问题

因为试图不包含数据，所以每次使用视图时，都必须处理查询执行时所需的任一个检索。

如果你用多个联结和过滤创建了复杂的视图或嵌套了视图，可能回发现性能下降的很厉害，因此，在部署使用了大量视图的应用前，应该进行测试。



## N+1.4 视图的规则和限制

1.与表一样，视图必须唯一命名

2.对于可以创建的视图数目没有限制

3.为了创建视图，必须具有足够的访问权限。这些权限通常有数据库管理人员授予

4.视图可以嵌套，即可以利用从其他视图中检索数据的查询来构造一个视图

5.  order By  可以用在视图中，但如果从该视图检索数据Select 中也含有 order by ,那么该视图中的order by 将被覆盖

6.视图不能索引，也不能有关联的触发器或默认值

7.视图可以和表一起使用。例如，编写一条连接表和视图的select语句。



## N+1.5 使用视图

1.视图创建语句

​	CREATE VIEW 

2.查看创建视图的语句

​	SHOW CREATE VIEW viewname;    

3.用DROP删除视图，其语法为 

​	DROP VIEW viewname;

4.更新视图时，可以先用DROP再用CREATE，也可以直接用CREATE OR REPLACE VIEW.如果要更新的视图不存在，则第2条更新语句

TODO待续；